!function(a){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=a();else if("function"==typeof define&&define.amd)define([],a);else{var b;b="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,b.client=a()}}(function(){var a;return function b(a,c,d){function e(g,h){if(!c[g]){if(!a[g]){var i="function"==typeof require&&require;if(!h&&i)return i(g,!0);if(f)return f(g,!0);var j=new Error("Cannot find module '"+g+"'");throw j.code="MODULE_NOT_FOUND",j}var k=c[g]={exports:{}};a[g][0].call(k.exports,function(b){var c=a[g][1][b];return e(c?c:b)},k,k.exports,b,a,c,d)}return c[g].exports}for(var f="function"==typeof require&&require,g=0;g<d.length;g++)e(d[g]);return e}({1:[function(b,c,d){!function(b){"use strict";function e(a,b){for(var c=a.length;c--;)if(a[c]===b)return!0;return!1}b.version="1.0.0";var f=/^function\s*[^\(]*\(\s*([^\)]*)\)/m,g=/,/,h=/^\s*(_?)(\S+?)\1\s*$/,i=/((\/\/.*$)|(\/\*[\s\S]*?\*\/))/gm;b.errors={MAPPING_BAD_PROP:"[Error infuse.Injector.mapClass/mapValue] the first parameter is invalid, a string is expected",MAPPING_BAD_VALUE:"[Error infuse.Injector.mapClass/mapValue] the second parameter is invalid, it can't null or undefined, with property: ",MAPPING_BAD_CLASS:"[Error infuse.Injector.mapClass/mapValue] the second parameter is invalid, a function is expected, with property: ",MAPPING_BAD_SINGLETON:"[Error infuse.Injector.mapClass] the third parameter is invalid, a boolean is expected, with property: ",MAPPING_ALREADY_EXISTS:"[Error infuse.Injector.mapClass/mapValue] this mapping already exists, with property: ",CREATE_INSTANCE_INVALID_PARAM:"[Error infuse.Injector.createInstance] invalid parameter, a function is expected",NO_MAPPING_FOUND:"[Error infuse.Injector.getInstance] no mapping found",INJECT_INSTANCE_IN_ITSELF_PROPERTY:"[Error infuse.Injector.getInjectedValue] A matching property has been found in the target, you can't inject an instance in itself",INJECT_INSTANCE_IN_ITSELF_CONSTRUCTOR:"[Error infuse.Injector.getInjectedValue] A matching constructor parameter has been found in the target, you can't inject an instance in itself",DEPENDENCIES_MISSING_IN_STRICT_MODE:'[Error infuse.Injector.getDependencies] An "inject" property (array) that describes the dependencies is missing in strict mode.'};var j=function(a,b,c,d){this.prop=a,this.value=b,this.cl=c,this.singleton=d||!1},k=function(a){if("string"!=typeof a)throw new Error(b.errors.MAPPING_BAD_PROP)},l=function(a,c){if(void 0===c||null===c)throw new Error(b.errors.MAPPING_BAD_VALUE+a)},m=function(a,c){if("function"!=typeof c)throw new Error(b.errors.MAPPING_BAD_CLASS+a)},n=function(a,c){if("boolean"!=typeof c)throw new Error(b.errors.MAPPING_BAD_SINGLETON+a)},o=function(a,c){var d=b.getDependencies(c);if(e(d,a))throw new Error(b.errors.INJECT_INSTANCE_IN_ITSELF_CONSTRUCTOR)},p=function(a,c){if(c.hasOwnProperty(a))throw new Error(b.errors.INJECT_INSTANCE_IN_ITSELF_PROPERTY)};b.Injector=function(){this.mappings={},this.parent=null,this.strictMode=!1},b.getDependencies=function(a){function b(a,b,c){d.push(c)}var c,d=[];a.hasOwnProperty("inject")&&"[object Array]"===Object.prototype.toString.call(a.inject)&&a.inject.length>0&&(c=a.inject);for(var e=a.toString().replace(i,""),j=e.match(f),k=j[1].split(g),l=0,m=k.length;m>l;l++){var n=c&&c[l]?c[l]:k[l];n.replace(h,b)}return d},b.Injector.prototype={createChild:function(){var a=new b.Injector;return a.parent=this,a.strictMode=this.strictMode,a},getMappingVo:function(a){return this.mappings?this.mappings[a]?this.mappings[a]:this.parent?this.parent.getMappingVo(a):null:null},mapValue:function(a,c){if(this.mappings[a])throw new Error(b.errors.MAPPING_ALREADY_EXISTS+a);return k(a),l(a,c),this.mappings[a]=new j(a,c,void 0,void 0),this},mapClass:function(a,c,d){if(this.mappings[a])throw new Error(b.errors.MAPPING_ALREADY_EXISTS+a);return k(a),m(a,c),d&&n(a,d),this.mappings[a]=new j(a,null,c,d),this},removeMapping:function(a){return this.mappings[a]=null,delete this.mappings[a],this},hasMapping:function(a){return!!this.mappings[a]},hasInheritedMapping:function(a){return!!this.getMappingVo(a)},getMapping:function(a){for(var b in this.mappings)if(this.mappings.hasOwnProperty(b)){var c=this.mappings[b];if(c.value===a||c.cl===a)return c.prop}},getValue:function(a){var c=this.mappings[a];if(!c){if(!this.parent)throw new Error(b.errors.NO_MAPPING_FOUND);c=this.parent.getMappingVo.apply(this.parent,arguments)}if(c.cl){var d=Array.prototype.slice.call(arguments);return d[0]=c.cl,c.singleton?(c.value||(c.value=this.createInstance.apply(this,d)),c.value):this.createInstance.apply(this,d)}return c.value},getClass:function(a){var b=this.mappings[a];if(!b){if(!this.parent)return;b=this.parent.getMappingVo.apply(this.parent,arguments)}return b.cl?b.cl:void 0},instantiate:function(a){if("function"!=typeof a)throw new Error(b.errors.CREATE_INSTANCE_INVALID_PARAM);if(this.strictMode&&!a.hasOwnProperty("inject"))throw new Error(b.errors.DEPENDENCIES_MISSING_IN_STRICT_MODE);for(var c=[null],d=b.getDependencies(a),e=0,f=d.length;f>e;e++)if(arguments.length>e+1&&void 0!==arguments[e+1]&&null!==arguments[e+1])c.push(arguments[e+1]);else{var g=d[e],h=this.getMappingVo(g);if(h){var i=this.getInjectedValue(h,g);c.push(i)}else c.push(void 0)}return new(Function.prototype.bind.apply(a,c))},inject:function(a,b){this.parent&&this.parent.inject(a,!0);for(var c in this.mappings)if(this.mappings.hasOwnProperty(c)){var d=this.getMappingVo(c);(a.hasOwnProperty(d.prop)||a.constructor&&a.constructor.prototype&&a.constructor.prototype.hasOwnProperty(d.prop))&&(a[c]=this.getInjectedValue(d,c))}return"function"!=typeof a.postConstruct||b||a.postConstruct(),this},getInjectedValue:function(a,b){var c,d=a.value;return a.cl&&(a.singleton?(a.value||(o(b,a.cl),a.value=this.instantiate(a.cl),c=a.value),d=a.value):(o(b,a.cl),d=this.instantiate(a.cl),c=d)),c&&(p(b,c),this.inject(c)),d},createInstance:function(){var a=this.instantiate.apply(this,arguments);return this.inject(a),a},getValueFromClass:function(a){for(var c in this.mappings)if(this.mappings.hasOwnProperty(c)){var d=this.mappings[c];if(d.cl===a)return d.singleton?(d.value||(d.value=this.createInstance.apply(this,arguments)),d.value):this.createInstance.apply(this,arguments)}if(this.parent)return this.parent.getValueFromClass.apply(this.parent,arguments);throw new Error(b.errors.NO_MAPPING_FOUND)},dispose:function(){this.mappings={}}},Function.prototype.bind||(Function.prototype.bind=function(a){var b=this;if("function"!=typeof b)throw new Error("Error, you must bind a function.");var c=Array.prototype.slice.call(arguments,1),d=function(){if(this instanceof d){var e=function(){};e.prototype=b.prototype;var f=new e,g=b.apply(f,c.concat(Array.prototype.slice.call(arguments)));return Object(g)===g?g:f}return b.apply(a,c.concat(Array.prototype.slice.call(arguments)))};return d}),"function"==typeof a&&"undefined"!=typeof a.amd&&a("infuse",b),"undefined"!=typeof c&&"undefined"!=typeof c.exports&&(c.exports=b),"undefined"!=typeof d&&(d=b)}(this.infuse=this.infuse||{})},{}],2:[function(a,b,c){"use strict";function d(){}ko.options.deferUpdates=!0,d.prototype.postConstruct=function(){this.mainSections=ko.observableArray(["project","map","textures"]),this.selectedMainSection=ko.observable("project"),this.languages=["ENG","FRA","GER"]},b.exports=d},{}],3:[function(a,b,c){"use strict";var d=function(a){window.setTimeout(a,0)};b.exports=d},{}],4:[function(a,b,c){"use strict";var d={};d.getResource=function(a,b,c){var d={method:"GET",url:a,dataType:"json",jsonp:!1,success:b,error:c};$.ajax(d)},d.putResource=function(a,b,c,d){var e={method:"PUT",url:a,dataType:"json",contentType:"application/json",data:JSON.stringify(b),jsonp:!1,processData:!1,success:c,error:d};$.ajax(e)},d.postResource=function(a,b,c,d){var e={method:"POST",url:a,dataType:"json",contentType:"application/json",data:JSON.stringify(b),jsonp:!1,processData:!1,success:c,error:d};$.ajax(e)},b.exports=d},{}],5:[function(a,b,c){"use strict";function d(){this.vm=null,this.projectsAdapter=null,this.levelsAdapter=null,this.mapAdapter=null,this.texturesAdapter=null}var e=a("infuse.js"),f=new e.Injector;f.mapValue("rest",a("./browser/rest.js")),f.mapValue("sys",{defer:a("./browser/defer.js")}),f.mapClass("vm",a("./ViewModel.js"),!0),f.mapClass("projectsAdapter",a("./vmAdapter/ProjectsAdapter"),!0),f.mapClass("texturesAdapter",a("./vmAdapter/TexturesAdapter"),!0),f.mapClass("levelsAdapter",a("./vmAdapter/LevelsAdapter"),!0),f.mapClass("mapAdapter",a("./vmAdapter/MapAdapter"),!0),d.prototype.postConstruct=function(){ko.applyBindings(this.vm)},f.mapClass("app",d,!0),b.exports={Application:d,injector:f,buildAndRun:function(){return f.getValue("app")}}},{"./ViewModel.js":2,"./browser/defer.js":3,"./browser/rest.js":4,"./vmAdapter/LevelsAdapter":7,"./vmAdapter/MapAdapter":8,"./vmAdapter/ProjectsAdapter":9,"./vmAdapter/TexturesAdapter":10,"infuse.js":1}],6:[function(a,b,c){"use strict";var d={};d.withResetValue=function(a){var b=!0,c=a,d={add:function(d){b?(c=d,b=!1):c!==d&&(c=a)},get:function(){return c}};return d},b.exports=d},{}],7:[function(a,b,c){"use strict";function d(){this.projectsAdapter=null,this.vm=null,this.rest=null}d.prototype.postConstruct=function(){var a=this.rest,b={available:ko.observableArray()};this.vm.levels=b,this.vm.projects.selected.subscribe(function(c){c?a.getResource(c.href+"/archive/levels",function(a){b.available(a.list)},function(){}):b.available([])})},b.exports=d},{}],8:[function(a,b,c){"use strict";function d(){this.projectsAdapter=null,this.texturesAdapter=null,this.vm=null,this.rest=null,this.sys=null}function e(a){var b=a.map(function(a){return a.toString(16)}).map(function(a){var b="0"+a;return b.substr(b.length-2)}).join(", 0x");return b.length>0&&(b="0x"+b),"["+b+"]"}var f=a("../../util/unifier.js"),g=function(a,b){a.tileType(b.properties.type),a.floorHeight(b.properties.floorHeight),a.ceilingHeight(b.properties.ceilingHeight),a.slopeHeight(b.properties.slopeHeight),a.slopeControl(b.properties.slopeControl),a.northWallHeight(b.properties.calculatedWallHeights.north),a.eastWallHeight(b.properties.calculatedWallHeights.east),a.southWallHeight(b.properties.calculatedWallHeights.south),a.westWallHeight(b.properties.calculatedWallHeights.west),b.realWorld&&(a.floorTextureIndex(b.properties.realWorld.floorTexture),a.floorTextureRotations(b.properties.realWorld.floorTextureRotations),a.ceilingTextureIndex(b.properties.realWorld.ceilingTexture),a.ceilingTextureRotations(b.properties.realWorld.ceilingTextureRotations),a.wallTextureIndex(b.properties.realWorld.wallTexture),a.wallTextureOffset(b.properties.realWorld.wallTextureOffset),a.useAdjacentWallTexture(b.properties.realWorld.useAdjacentWallTexture))};d.prototype.postConstruct=function(){var a=this,b=this.rest,c={tileTypes:["","open","solid","diagonalOpenSouthEast","diagonalOpenSouthWest","diagonalOpenNorthWest","diagonalOpenNorthEast","slopeSouthToNorth","slopeWestToEast","slopeNorthToSouth","slopeEastToWest","valleySouthEastToNorthWest","valleySouthWestToNorthEast","valleyNorthWestToSouthEast","valleyNorthEastToSouthWest","ridgeNorthWestToSouthEast","ridgeNorthEastToSouthWest","ridgeSouthEastToNorthWest","ridgeSouthWestToNorthEast"],slopeControls:["","ceilingInverted","ceilingMirrored","ceilingFlat","floorFlat"],heightValues:["*",0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31],depthValues:["*",1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32],maybeValues:["*","no","yes"],mapSection:ko.observableArray(["control","tiles","objects"]),selectedMapSection:ko.observable("control"),selectedLevel:ko.observable(),levelTextures:ko.observableArray(),selectedLevelTextureIndex:ko.observable(-1),selectedLevelTexture:ko.observable(),levelObjects:ko.observableArray(),tileRows:ko.observableArray(),textureDisplay:ko.observableArray(["Floor","Ceiling"]),selectedTextureDisplay:ko.observable("Floor"),selectedTiles:ko.observableArray(),selectedTileType:ko.observable(""),selectedSlopeControl:ko.observable(""),selectedFloorHeight:ko.observable("*"),selectedCeilingHeight:ko.observable("*"),selectedSlopeHeight:ko.observable("*"),selectedTileFloorTextureIndex:ko.observable(-1),selectedTileCeilingTextureIndex:ko.observable(-1),selectedTileWallTextureIndex:ko.observable(-1),selectedWallTextureOffset:ko.observable("*"),selectedUseAdjacentWallTexture:ko.observable("*")};this.vm.map=c,c.onTileClicked=this.getTileClickedHandler(),c.changeLevelTexture=this.changeLevelTexture.bind(this),c.isCyberspace=ko.computed(function(){var a=c.selectedLevel();return!(!a||!a.properties.cyberspaceFlag)});this.vm.textures;c.shouldShowFloorTexture=ko.computed(function(){return!c.isCyberspace()&&"Floor"===c.selectedTextureDisplay()}),c.shouldShowCeilingTexture=ko.computed(function(){return!c.isCyberspace()&&"Ceiling"===c.selectedTextureDisplay()}),c.selectedTileFloorTextureUrl=ko.computed(this.computeTextureUrl(c.selectedTileFloorTextureIndex)),c.selectedTileCeilingTextureUrl=ko.computed(this.computeTextureUrl(c.selectedTileCeilingTextureIndex)),c.selectedTileWallTextureUrl=ko.computed(this.computeTextureUrl(c.selectedTileWallTextureIndex));var d=function(){var a=c.levelTextures(),b=c.selectedLevelTextureIndex();b>=0&&b<a.length?c.selectedLevelTexture(a[b]):c.selectedLevelTexture(null)};c.levelTextures.subscribe(function(a){d()}),c.selectedLevelTextureIndex.subscribe(function(a){d()}),c.selectedTiles.subscribe(function(a){var b=f.withResetValue(""),d=f.withResetValue(""),e=f.withResetValue("*"),g=f.withResetValue("*"),h=f.withResetValue("*"),i=f.withResetValue(-1),j=f.withResetValue(-1),k=f.withResetValue(-1),l=f.withResetValue("*"),m=f.withResetValue("*");a.forEach(function(a){b.add(a.tileType()),d.add(a.slopeControl()),e.add(a.slopeHeight()),g.add(a.floorHeight()),h.add(32-a.ceilingHeight())}),c.isCyberspace()||a.forEach(function(a){i.add(a.floorTextureIndex()),j.add(a.ceilingTextureIndex()),k.add(a.wallTextureIndex()),l.add(a.wallTextureOffset()),m.add(a.useAdjacentWallTexture()?"yes":"no")}),c.selectedTileType(b.get()),c.selectedSlopeControl(d.get()),c.selectedSlopeHeight(e.get()),c.selectedFloorHeight(g.get()),c.selectedCeilingHeight(h.get()),c.selectedTileFloorTextureIndex(i.get()),c.selectedTileCeilingTextureIndex(j.get()),c.selectedTileWallTextureIndex(k.get()),c.selectedWallTextureOffset(l.get()),c.selectedUseAdjacentWallTexture(m.get())}),c.selectedTileType.subscribe(function(a){""!==a&&c.selectedTiles().forEach(function(d){var e={type:a},f=c.selectedLevel().href+"/tiles/"+d.y+"/"+d.x;d.tileType()!==a&&b.putResource(f,e,function(a){g(d,a)},function(){})})}),c.filteredLevelObjects=ko.computed(function(){var a=c.levelObjects(),b=c.selectedTiles(),d=[];return 0===b.length?d=a:a.forEach(function(a){var c=!1;b.forEach(function(b){b.x===a.raw.properties.tileX&&b.y===a.raw.properties.tileY&&(c=!0)}),c&&d.push(a)}),d}),c.selectedLevel.subscribe(function(d){d&&(b.getResource(d.href+"/textures",function(b){a.onLevelTexturesLoaded(b)},function(){}),b.getResource(d.href+"/objects",function(a){c.levelObjects.removeAll(),a.table.forEach(function(a){var d={raw:a,hacking:{classDataString:e(a.Hacking.ClassData)},name:ko.observable("???")};b.getResource(a.links[0].href,function(a){d.name(a.properties.longName[0])}),c.levelObjects.push(d)})},function(){}),b.getResource(d.href+"/tiles",function(b){a.onMapLoaded(b)},function(){}))})},d.prototype.computeTextureUrl=function(a){var b=this.vm.map.levelTextures;return function(){var c=a(),d=b(),e="";return c>=0&&c<d.length&&(e=d[c].largeTextureUrl()),e}},d.prototype.getTileClickedHandler=function(){var a=this.vm.map;return function(b,c){var d=!b.isSelected();b.isSelected(d),c.ctrlKey?d?a.selectedTiles.push(b):a.selectedTiles.remove(b):(a.selectedTiles.removeAll().forEach(function(a){a.isSelected(!1)}),d&&a.selectedTiles.push(b))}},d.prototype.changeLevelTexture=function(){var a=this.vm.map.selectedLevelTextureIndex(),b=this.vm.map.selectedLevelTexture(),c=this.vm.map.levelTextures().map(function(a){return a.id}),d=this.vm.map.selectedLevel(),e=this;b&&a>=0&&a<c.length&&(c[a]=b.id,this.rest.putResource(d.href+"/textures",c,function(a){e.onLevelTexturesLoaded(a)},function(){}))},d.prototype.onLevelTexturesLoaded=function(a){var b=this.vm.textures,c=a.ids.map(function(a){return b.getTexture(a)});this.vm.map.levelTextures(c)},d.prototype.onMapLoaded=function(a){var b=this,c=[];a.Table.reverse(),a.Table.forEach(function(a,d){var e={y:63-d,tileColumns:[]};a.forEach(function(a,c){var f=b.createTile(c,63-d,a);e.tileColumns.push(f)}),c.push(e)}),this.vm.map.tileRows(c)},d.prototype.createTile=function(a,b,c){var d={x:a,y:b,tileType:ko.observable(c.properties.type),floorHeight:ko.observable(c.properties.floorHeight),ceilingHeight:ko.observable(c.properties.ceilingHeight),slopeHeight:ko.observable(c.properties.slopeHeight),slopeControl:ko.observable(c.properties.slopeControl),northWallHeight:ko.observable(c.properties.calculatedWallHeights.north),eastWallHeight:ko.observable(c.properties.calculatedWallHeights.east),southWallHeight:ko.observable(c.properties.calculatedWallHeights.south),westWallHeight:ko.observable(c.properties.calculatedWallHeights.west),isSelected:ko.observable(!1)};return c.properties.realWorld&&(d.floorTextureIndex=ko.observable(c.properties.realWorld.floorTexture),d.floorTextureRotations=ko.observable(c.properties.realWorld.floorTextureRotations),d.ceilingTextureIndex=ko.observable(c.properties.realWorld.ceilingTexture),d.ceilingTextureRotations=ko.observable(c.properties.realWorld.ceilingTextureRotations),d.wallTextureIndex=ko.observable(c.properties.realWorld.wallTexture),d.wallTextureOffset=ko.observable(c.properties.realWorld.wallTextureOffset),d.useAdjacentWallTexture=ko.observable(c.properties.realWorld.useAdjacentWallTexture)),d.floorTextureUrl=ko.computed(this.computeTextureUrl(d.floorTextureIndex)),d.ceilingTextureUrl=ko.computed(this.computeTextureUrl(d.ceilingTextureIndex)),d.wallTextureUrl=ko.computed(this.computeTextureUrl(d.wallTextureIndex)),d.hasWallSouthWestToNorthEast=ko.computed(function(){var a=d.tileType();return"diagonalOpenNorthWest"===a||"diagonalOpenSouthEast"===a}),d.hasWallSouthEastToNorthWest=ko.computed(function(){var a=d.tileType();return"diagonalOpenNorthEast"===a||"diagonalOpenSouthWest"===a}),d},b.exports=d},{"../../util/unifier.js":6}],9:[function(a,b,c){"use strict";function d(){this.vm=null,this.rest=null}d.prototype.postConstruct=function(){var a=this,b={available:ko.observableArray(),selected:ko.observable(),newProjectId:ko.observable("")};b.canCreateNewProject=ko.computed(function(){var a=b.newProjectId(),c=b.available(),d=!1;return c.forEach(function(b){b.id===a&&(d=!0)}),""!==a&&!d}),b.createProject=function(){var c={id:b.newProjectId()};a.rest.postResource("/projects",c,function(a){b.available.push(a)},function(){})},this.vm.projects=b,this.rest.getResource("/projects",function(b){a.onProjectsLoaded(b)},function(){})},d.prototype.onProjectsLoaded=function(a){var b=this.vm.projects;b.available(a.items)},b.exports=d},{}],10:[function(a,b,c){"use strict";function d(){this.projectsAdapter=null,this.vm=null,this.rest=null,this.revisionCounter=0}d.prototype.postConstruct=function(){var a=this,b={all:ko.observableArray(),pageIndex:ko.observable(0),pageSideWidth:ko.observable(4),selectedTexture:ko.observable()};b.pageSize=ko.computed(function(){var a=b.pageSideWidth();return a*a}),b.page=ko.computed(function(){var a=b.pageIndex(),c=b.pageSize(),d=a*c;return b.all().slice(d,d+c)}),b.canShowNextPage=ko.computed(function(){var a=b.pageIndex(),c=b.pageSize(),d=a*c;return d+c<b.all().length}),b.nextPage=function(){b.canShowNextPage()&&b.pageIndex(b.pageIndex()+1)},b.previousPage=function(){var a=b.pageIndex();a>0&&b.pageIndex(a-1)},b.selectTexture=function(a){b.selectedTexture(a)},b.reload=this.reloadTextures.bind(this),b.getTexture=this.getTexture.bind(this),this.vm.textures=b,this.vm.projects.selected.subscribe(function(c){c?a.reloadTexturesFrom(c):b.all([])})},d.prototype.getTexture=function(a){var b=this.vm.textures.all().find(function(b){return b.id===a});return b||(b=this.createTextureEntry(a),this.queryTextureData(b),this.vm.textures.all.push(b)),b},d.prototype.reloadTextures=function(){var a=this.vm.projects.selected();a&&this.reloadTexturesFrom(a)},d.prototype.reloadTexturesFrom=function(a){var b=this;this.revisionCounter++,this.rest.getResource(a.href+"/textures",function(a){b.setTextures(a.list)},function(){})},d.prototype.setTextures=function(a){var b=this.vm.textures,c=this,d=a.map(function(a){var b=c.createTextureEntry(a.id);return c.onTextureDataLoaded(b,a),b});b.all(d)},d.prototype.queryTextureData=function(a){var b=this,c=this.vm.projects.selected();this.rest.getResource(c.href+"/textures/"+a.id,function(c){b.onTextureDataLoaded(a,c)},function(){})},d.prototype.createTextureEntry=function(a){var b={id:a,largeTextureUrl:ko.observable(""),mediumTextureUrl:ko.observable(""),smallTextureUrl:ko.observable(""),iconTextureUrl:ko.observable(""),texts:ko.observableArray()};return b.title=ko.computed(function(){var a=b.texts(),c=b.id+": ";return c+=a.length>0?'"'+a[0].name()+'"':"???"}),b},d.prototype.onTextureDataLoaded=function(a,b){var c=this,d=[],e=function(a){var b;return a<d.length?b=d[a]:(b={name:ko.observable(""),cantBeUsed:ko.observable("")},d.push(b)),b};a.id=b.id,b.images.forEach(function(b){"large"===b.rel&&a.largeTextureUrl(b.href+"/png?clientRevision="+c.revisionCounter),"medium"===b.rel&&a.mediumTextureUrl(b.href+"/png?clientRevision="+c.revisionCounter),"small"===b.rel&&a.smallTextureUrl(b.href+"/png?clientRevision="+c.revisionCounter),"icon"===b.rel&&a.iconTextureUrl(b.href+"/png?clientRevision="+c.revisionCounter)}),b.properties.name.forEach(function(a,b){e(b).name(a)}),b.properties.cantBeUsed.forEach(function(a,b){e(b).cantBeUsed(a)}),a.texts(d)},b.exports=d},{}]},{},[5])(5)});